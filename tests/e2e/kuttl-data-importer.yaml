apiVersion: kuttl.dev/v1
kind: TestSuite
crdDir: config/crd/bases
artifactsDir: /tmp/
parallel: 1
timeout: 180
skipDelete: true
testDirs:
- tests/e2e/data-importers
manifestDirs:
- tests/manifests
- internal/data-importer/deploy/pg/dataimporter.yaml
startKIND: true
kindConfig: tests/e2e/data-importers/kind.conf.yaml
kindContainers:
  - perconalab/everest-operator:0.0.0
commands:
  # Deploy Everest Operator into KIND cluster
  - command: make -f ${OPERATOR_ROOT_PATH}/Makefile deploy-test
  # Wait for Everest Operator to be ready.
  - command: kubectl wait --for condition=available --timeout=30s deploy/everest-controller-manager -n everest-system
