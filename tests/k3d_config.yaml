# See more details at https://k3d.io/v5.3.0/usage/configfile/
apiVersion: k3d.io/v1alpha5
kind: Simple
metadata:
  name: everest-operator-test
servers: 1 # number of control-plane nodes in the cluster
agents: 3 # number of worker nodes in the cluster
image: rancher/k3s:v1.33.2-k3s1 # image to use for the cluster nodes; list of supported images: https://hub.docker.com/r/rancher/k3s/tags
options:
  k3d: # k3d runtime settings
    wait: true # wait for cluster to be usable before returining;
    disableLoadbalancer: true
  k3s: # options passed on to K3s itself
    extraArgs:
      - arg: "--disable=traefik,metrics-server,servicelb"
        nodeFilters:
          - server:*
      - arg: "--disable-network-policy"
        nodeFilters:
          - server:*
      - arg: "--disable-helm-controller"
        nodeFilters:
          - server:*
