apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.16.3
  creationTimestamp: null
  name: databaseclusterrestores.everest.percona.com
spec:
  group: everest.percona.com
  names:
    kind: DatabaseClusterRestore
    listKind: DatabaseClusterRestoreList
    plural: databaseclusterrestores
    shortNames:
    - dbrestore
    - dbr
    singular: databaseclusterrestore
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Cluster name
      jsonPath: .spec.dbClusterName
      name: Cluster
      type: string
    - description: DBClusterBackup name
      jsonPath: .spec.dataSource.dbClusterBackupName
      name: Backup
      type: string
    - description: Backup path
      jsonPath: .spec.dataSource.backupSource.path
      name: Path
      type: string
    - description: Storage name
      jsonPath: .spec.dataSource.backupSource.backupStorageName
      name: Storage
      type: string
    - description: Job status
      jsonPath: .status.state
      name: Status
      type: string
    - description: Completed time
      jsonPath: .status.completed
      name: Completed
      type: date
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: DatabaseClusterRestore is the Schema for the databaseclusterrestores
          API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: DatabaseClusterRestoreSpec defines the desired state of DatabaseClusterRestore.
            properties:
              dataSource:
                description: DataSource defines a data source for restoration.
                properties:
                  backupSource:
                    description: BackupSource is the backup source to restore from
                    properties:
                      backupStorageName:
                        description: |-
                          BackupStorageName is the name of the BackupStorage used for backups.
                          The BackupStorage must be created in the same namespace as the DatabaseCluster.
                        type: string
                      path:
                        description: Path is the path to the backup file/directory.
                        type: string
                    required:
                    - backupStorageName
                    - path
                    type: object
                  dataImport:
                    description: DataImport allows importing data from an external
                      backup source.
                    properties:
                      dataImporterRef:
                        description: DataImporterRef is the reference to the data
                          importer.
                        properties:
                          name:
                            default: ""
                            description: |-
                              Name of the referent.
                              This field is effectively required, but due to backwards compatibility is
                              allowed to be empty. Instances of this type with an empty value here are
                              almost certainly wrong.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            type: string
                        type: object
                        x-kubernetes-map-type: atomic
                      parameters:
                        description: |-
                          Params defines the configuration parameters for the data import job.
                          These parameters are specific to the DataImporter being used and must conform to
                          the schema defined in the DataImporter's .spec.config.openAPIV3Schema.
                        type: object
                        x-kubernetes-preserve-unknown-fields: true
                      source:
                        description: Source is the source of the data to import.
                        properties:
                          backupStorageRef:
                            description: BackupStorageRef is the reference to the
                              backup storage.
                            properties:
                              name:
                                default: ""
                                description: |-
                                  Name of the referent.
                                  This field is effectively required, but due to backwards compatibility is
                                  allowed to be empty. Instances of this type with an empty value here are
                                  almost certainly wrong.
                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                type: string
                            type: object
                            x-kubernetes-map-type: atomic
                          path:
                            description: |-
                              Path is the path to the directory to import the data from.
                              This may be a path to a file or a directory, depending on the data importer.
                            type: string
                          s3:
                            description: S3Ref is the reference to the S3 source.
                            properties:
                              bucket:
                                description: Bucket is the name of the S3 bucket.
                                type: string
                              credentialsSecretRef:
                                description: |-
                                  CredentialsSecretRef is the reference to the secret containing the S3 credentials.
                                  The Secret must contain the keys `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY`.
                                properties:
                                  name:
                                    default: ""
                                    description: |-
                                      Name of the referent.
                                      This field is effectively required, but due to backwards compatibility is
                                      allowed to be empty. Instances of this type with an empty value here are
                                      almost certainly wrong.
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                    type: string
                                type: object
                                x-kubernetes-map-type: atomic
                              endpointURL:
                                description: EndpointURL is an endpoint URL of backup
                                  storage.
                                type: string
                              forcePathStyle:
                                default: false
                                description: |-
                                  ForcePathStyle is set to use path-style URLs.
                                  If unspecified, the default value is false.
                                type: boolean
                              region:
                                description: Region is the region of the S3 bucket.
                                type: string
                              verifyTLS:
                                default: true
                                description: |-
                                  VerifyTLS is set to ensure TLS/SSL verification.
                                  If unspecified, the default value is true.
                                type: boolean
                            type: object
                        type: object
                    required:
                    - dataImporterRef
                    - source
                    type: object
                  dbClusterBackupName:
                    description: DBClusterBackupName is the name of the DB cluster
                      backup to restore from
                    type: string
                  pitr:
                    description: PITR is the point-in-time recovery configuration
                    properties:
                      date:
                        description: 'Date is the UTC date to recover to. The accepted
                          format: "2006-01-02T15:04:05Z".'
                        type: string
                      type:
                        default: date
                        description: Type is the type of recovery.
                        enum:
                        - date
                        - latest
                        type: string
                    type: object
                type: object
              dbClusterName:
                description: DBClusterName defines the cluster name to restore.
                type: string
            required:
            - dataSource
            - dbClusterName
            type: object
          status:
            description: DatabaseClusterRestoreStatus defines the observed state of
              DatabaseClusterRestore.
            properties:
              completed:
                format: date-time
                type: string
              message:
                type: string
              state:
                description: RestoreState represents state of restoration.
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: null
  storedVersions: null
