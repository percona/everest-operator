---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.16.3
  name: dataimportjobs.everest.percona.com
spec:
  group: everest.percona.com
  names:
    kind: DataImportJob
    listKind: DataImportJobList
    plural: dataimportjobs
    shortNames:
    - dij
    singular: dataimportjob
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.targetClusterRef.name
      name: TargetCluster
      type: string
    - jsonPath: .status.phase
      name: Phase
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: DataImportJob is the schema for the dataimportjobs API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            properties:
              dataImporterRef:
                description: DataImporterRef is the reference to the data importer.
                properties:
                  name:
                    default: ""
                    description: |-
                      Name of the referent.
                      This field is effectively required, but due to backwards compatibility is
                      allowed to be empty. Instances of this type with an empty value here are
                      almost certainly wrong.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                    type: string
                type: object
                x-kubernetes-map-type: atomic
              parameters:
                description: |-
                  Params defines the configuration parameters for the data import job.
                  These parameters are specific to the DataImporter being used and must conform to
                  the schema defined in the DataImporter's .spec.config.openAPIV3Schema.
                type: object
                x-kubernetes-preserve-unknown-fields: true
              serviceAccountName:
                description: |-
                  ServiceAccountName is the name of the service account to use for the import job.
                  This service account must have the necessary permissions to perform the import.
                type: string
              source:
                description: Source is the source of the data to import.
                properties:
                  backupStorageRef:
                    description: BackupStorageRef is the reference to the backup storage.
                    properties:
                      name:
                        default: ""
                        description: |-
                          Name of the referent.
                          This field is effectively required, but due to backwards compatibility is
                          allowed to be empty. Instances of this type with an empty value here are
                          almost certainly wrong.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                    type: object
                    x-kubernetes-map-type: atomic
                  path:
                    description: |-
                      Path is the path to the directory to import the data from.
                      This may be a path to a file or a directory, depending on the data importer.
                    type: string
                  s3:
                    description: S3Ref is the reference to the S3 source.
                    properties:
                      bucket:
                        description: Bucket is the name of the S3 bucket.
                        type: string
                      credentialsSecretRef:
                        description: |-
                          CredentialsSecretRef is the reference to the secret containing the S3 credentials.
                          The Secret must contain the keys `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY`.
                        properties:
                          name:
                            default: ""
                            description: |-
                              Name of the referent.
                              This field is effectively required, but due to backwards compatibility is
                              allowed to be empty. Instances of this type with an empty value here are
                              almost certainly wrong.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            type: string
                        type: object
                        x-kubernetes-map-type: atomic
                      endpointURL:
                        description: EndpointURL is an endpoint URL of backup storage.
                        type: string
                      forcePathStyle:
                        default: false
                        description: |-
                          ForcePathStyle is set to use path-style URLs.
                          If unspecified, the default value is false.
                        type: boolean
                      region:
                        description: Region is the region of the S3 bucket.
                        type: string
                      verifyTLS:
                        default: true
                        description: |-
                          VerifyTLS is set to ensure TLS/SSL verification.
                          If unspecified, the default value is true.
                        type: boolean
                    type: object
                type: object
              targetClusterRef:
                description: TargetClusterRef is the reference to the target cluster.
                properties:
                  name:
                    default: ""
                    description: |-
                      Name of the referent.
                      This field is effectively required, but due to backwards compatibility is
                      allowed to be empty. Instances of this type with an empty value here are
                      almost certainly wrong.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                    type: string
                type: object
                x-kubernetes-map-type: atomic
            type: object
          status:
            properties:
              jobRef:
                description: JobRef is the reference to the job that is running the
                  data import.
                properties:
                  name:
                    default: ""
                    description: |-
                      Name of the referent.
                      This field is effectively required, but due to backwards compatibility is
                      allowed to be empty. Instances of this type with an empty value here are
                      almost certainly wrong.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                    type: string
                type: object
                x-kubernetes-map-type: atomic
              message:
                description: Message is the message of the data import job.
                type: string
              phase:
                description: Phase is the current phase of the data import job.
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
